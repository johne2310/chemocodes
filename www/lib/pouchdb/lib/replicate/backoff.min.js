"use strict";function randomNumber(e,t){e=parseInt(e,10),t=parseInt(t,10),e!==e&&(e=0),t!==t||e>=t?t=(e||1)<<1:t+=1;var n=Math.random(),r=t-e;return~~(r*n+e)}function defaultBackOff(e){var t=0;return e||(t=2e3),randomNumber(e,t)}function backOff(e,t,n,r){return e.retry===!1?(t.emit("error",n),void t.removeAllListeners()):("function"!=typeof e.back_off_function&&(e.back_off_function=defaultBackOff),t.emit("requestError",n),"active"===t.state&&(t.emit("paused",n),t.state="stopped",t.once("active",function(){e.current_back_off=STARTING_BACK_OFF})),e.current_back_off=e.current_back_off||STARTING_BACK_OFF,e.current_back_off=e.back_off_function(e.current_back_off),void setTimeout(r,e.current_back_off))}var STARTING_BACK_OFF=0;module.exports=backOff;
