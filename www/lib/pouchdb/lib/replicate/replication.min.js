"use strict";function Replication(){EE.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new Promise(function(t,n){e.once("complete",t),e.once("error",n)});e.then=function(e,n){return t.then(e,n)},e["catch"]=function(e){return t["catch"](e)},e["catch"](function(){})}var utils=require("./../utils"),EE=require("events").EventEmitter,Promise=utils.Promise;utils.inherits(Replication,EE),Replication.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},Replication.prototype.ready=function(e,t){function r(){n.cancel()}function i(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}var n=this;n._readyCalled||(n._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),n.once("complete",i))},module.exports=Replication;
