"use strict";function sortObjectPropertiesByKey(e){return Object.keys(e).sort(collate).reduce(function(t,n){return t[n]=e[n],t},{})}function generateReplicationId(e,t,n){var r=n.doc_ids?n.doc_ids.sort(collate):"",i=n.filter?n.filter.toString():"",a="",o="";return n.filter&&n.query_params&&(a=JSON.stringify(sortObjectPropertiesByKey(n.query_params))),n.filter&&"_view"===n.filter&&(o=n.view.toString()),e.id().then(function(e){return t.id().then(function(t){var n=e+t+i+o+a+r;return md5(n).then(function(e){return e=e.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+e})})})}var md5=require("../deps/md5"),collate=require("pouchdb-collate").collate;module.exports=generateReplicationId;
