var merge=require("./merge");exports.extend=require("pouchdb-extend"),exports.ajax=require("./deps/ajax/prequest"),exports.uuid=require("./deps/uuid"),exports.getArguments=require("argsarray");var collections=require("pouchdb-collections");exports.Map=collections.Map,exports.Set=collections.Set;var parseDoc=require("./deps/docs/parseDoc"),Promise=require("./deps/promise");exports.Promise=Promise;var base64=require("./deps/binary/base64");exports.atob=base64.atob,exports.btoa=base64.btoa;var binStringToBlobOrBuffer=require("./deps/binary/binaryStringToBlobOrBuffer");exports.binaryStringToBlobOrBuffer=binStringToBlobOrBuffer,exports.clone=function(e){return exports.extend(!0,{},e)},exports.pick=require("./deps/pick"),exports.inherits=require("inherits"),exports.call=require("./deps/call"),exports.filterChange=function(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){if(r.doc||(r.doc={}),e.filter&&n&&!e.filter.call(this,r.doc,t))return!1;if(e.include_docs){if(!e.attachments)for(var i in r.doc._attachments)r.doc._attachments.hasOwnProperty(i)&&(r.doc._attachments[i].stub=!0)}else delete r.doc;return!0}},exports.parseDoc=parseDoc.parseDoc,exports.invalidIdError=parseDoc.invalidIdError,exports.isCordova=function(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap},exports.Changes=require("./changesHandler"),exports.once=require("./deps/once"),exports.toPromise=require("./deps/toPromise"),exports.adapterFun=function(e,t){function r(e,t,r){if(n.enabled){for(var i=[e._db_name,t],a=0;a<r.length-1;a++)i.push(r[a]);n.apply(null,i);var o=r[r.length-1];r[r.length-1]=function(r,i){var a=[e._db_name,t];a=a.concat(r?["error",r]:["success",i]),n.apply(null,a),o(r,i)}}}var n=require("debug")("pouchdb:api");return exports.toPromise(exports.getArguments(function(n){if(this._closed)return Promise.reject(new Error("database is closed"));var i=this;return r(i,e,n),this.taskqueue.isReady?t.apply(this,n):new Promise(function(t,r){i.taskqueue.addTask(function(a){a?r(a):t(i[e].apply(i,n))})})}))},exports.explain404=require("./deps/ajax/explain404"),exports.parseUri=require("./deps/parseUri"),exports.compare=function(e,t){return t>e?-1:e>t?1:0},exports.compactTree=function(e){var t=[];return merge.traverseRevTree(e.rev_tree,function(e,n,r,i,a){"available"!==a.status||e||(t.push(n+"-"+r),a.status="missing")}),t};var vuvuzela=require("vuvuzela");exports.safeJsonParse=function(e){try{return JSON.parse(e)}catch(t){return vuvuzela.parse(e)}},exports.safeJsonStringify=function(e){try{return JSON.stringify(e)}catch(t){return vuvuzela.stringify(e)}};
