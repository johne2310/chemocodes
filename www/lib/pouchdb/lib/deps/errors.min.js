"use strict";function PouchError(e){Error.call(e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}var inherits=require("inherits");inherits(PouchError,Error),PouchError.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},exports.UNAUTHORIZED=new PouchError({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),exports.MISSING_BULK_DOCS=new PouchError({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),exports.MISSING_DOC=new PouchError({status:404,error:"not_found",reason:"missing"}),exports.REV_CONFLICT=new PouchError({status:409,error:"conflict",reason:"Document update conflict"}),exports.INVALID_ID=new PouchError({status:400,error:"invalid_id",reason:"_id field must contain a string"}),exports.MISSING_ID=new PouchError({status:412,error:"missing_id",reason:"_id is required for puts"}),exports.RESERVED_ID=new PouchError({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),exports.NOT_OPEN=new PouchError({status:412,error:"precondition_failed",reason:"Database not open"}),exports.UNKNOWN_ERROR=new PouchError({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),exports.BAD_ARG=new PouchError({status:500,error:"badarg",reason:"Some query argument is invalid"}),exports.INVALID_REQUEST=new PouchError({status:400,error:"invalid_request",reason:"Request was invalid"}),exports.QUERY_PARSE_ERROR=new PouchError({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),exports.DOC_VALIDATION=new PouchError({status:500,error:"doc_validation",reason:"Bad special document member"}),exports.BAD_REQUEST=new PouchError({status:400,error:"bad_request",reason:"Something wrong with the request"}),exports.NOT_AN_OBJECT=new PouchError({status:400,error:"bad_request",reason:"Document must be a JSON object"}),exports.DB_MISSING=new PouchError({status:404,error:"not_found",reason:"Database not found"}),exports.IDB_ERROR=new PouchError({status:500,error:"indexed_db_went_bad",reason:"unknown"}),exports.WSQ_ERROR=new PouchError({status:500,error:"web_sql_went_bad",reason:"unknown"}),exports.LDB_ERROR=new PouchError({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),exports.FORBIDDEN=new PouchError({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),exports.INVALID_REV=new PouchError({status:400,error:"bad_request",reason:"Invalid rev format"}),exports.FILE_EXISTS=new PouchError({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),exports.MISSING_STUB=new PouchError({status:412,error:"missing_stub"}),exports.error=function(e,t,n){function r(t){for(var r in e)"function"!=typeof e[r]&&(this[r]=e[r]);void 0!==n&&(this.name=n),void 0!==t&&(this.reason=t)}return r.prototype=PouchError.prototype,new r(t)},exports.getErrorTypeByProp=function(e,t,n){var r=exports,i=Object.keys(r).filter(function(n){var i=r[n];return"function"!=typeof i&&i[e]===t}),a=n&&i.filter(function(e){var t=r[e];return t.message===n})[0]||i[0];return a?r[a]:null},exports.generateErrorFromResponse=function(e){var t,n,r,i,a,o=exports;return n=e.error===!0&&"string"==typeof e.name?e.name:e.error,a=e.reason,r=o.getErrorTypeByProp("name",n,a),e.missing||"missing"===a||"deleted"===a||"not_found"===n?r=o.MISSING_DOC:"doc_validation"===n?(r=o.DOC_VALIDATION,i=a):"bad_request"===n&&r.message!==a&&(r=o.BAD_REQUEST),r||(r=o.getErrorTypeByProp("status",e.status,a)||o.UNKNOWN_ERROR),t=o.error(r,a,n),i&&(t.message=i),e.id&&(t.id=e.id),e.status&&(t.status=e.status),e.missing&&(t.missing=e.missing),t};
