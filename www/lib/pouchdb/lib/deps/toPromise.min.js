"use strict";function toPromise(e){return getArguments(function(t){var i,n=this,r="function"==typeof t[t.length-1]?t.pop():!1;r&&(i=function(e,t){process.nextTick(function(){r(e,t)})});var a=new Promise(function(r,i){var a;try{var o=once(function(e,t){e?i(e):r(t)});t.push(o),a=e.apply(n,t),a&&"function"==typeof a.then&&r(a)}catch(s){i(s)}});return i&&a.then(function(e){i(null,e)},i),a})}var Promise=require("./promise"),getArguments=require("argsarray"),once=require("./once");module.exports=toPromise;
